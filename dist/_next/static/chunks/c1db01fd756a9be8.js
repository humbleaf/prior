(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,970065,e=>{"use strict";var t=e.i(843476),a=e.i(647163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardHeader",()=>n,"CardTitle",()=>s])},781947,e=>{"use strict";var t=e.i(843476),a=e.i(225913),r=e.i(647163);let n=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function s({className:e,variant:a,...s}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(n({variant:a}),e),...s})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}e.s(["Alert",()=>s,"AlertDescription",()=>i])},778917,e=>{"use strict";let t=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],778917)},440160,e=>{"use strict";let t=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],440160)},269638,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],269638)},972520,878894,e=>{"use strict";var t=e.i(475254);let a=(0,t.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>a],972520);let r=(0,t.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>r],878894)},645239,e=>{"use strict";let t=()=>{if(console.log("Checking Web Crypto availability..."),console.log("typeof window:","object"),console.log("typeof window?.crypto:",typeof window?.crypto),console.log("typeof window?.crypto?.subtle:",typeof window?.crypto?.subtle),console.log("typeof crypto:",typeof crypto),console.log("typeof globalThis?.crypto:",typeof globalThis?.crypto),window.crypto&&window.crypto.subtle)return console.log("✓ Using window.crypto"),window.crypto;if("u">typeof crypto&&crypto.subtle)return console.log("✓ Using global crypto"),crypto;if("u">typeof globalThis&&globalThis.crypto&&globalThis.crypto.subtle)return console.log("✓ Using globalThis.crypto"),globalThis.crypto;throw Error(`Web Crypto API not available. window=object, window.crypto=${typeof window?.crypto}, globalThis.crypto=${typeof globalThis?.crypto}`)};async function a(){let e=t(),a=await e.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=l(await e.subtle.exportKey("raw",a));return{key:a,exportedKey:r}}async function r(e,a){let r=t(),n=r.getRandomValues(new Uint8Array(12)),s=await e.arrayBuffer(),i=await r.subtle.encrypt({name:"AES-GCM",iv:n},a,s),o=l(await r.subtle.exportKey("raw",a));return{encryptedData:i,iv:n,key:a,exportedKey:o}}async function n(e,a,r){let n=t();return await n.subtle.decrypt({name:"AES-GCM",iv:r},a,e)}async function s(e){let a=t();return Array.from(new Uint8Array(await a.subtle.digest("SHA-256",e))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function i(e){let a=t(),r=function(e){let t=atob(e),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return a.buffer}(e);return await a.subtle.importKey("raw",r,{name:"AES-GCM",length:256},!1,["decrypt"])}function l(e){let t=new Uint8Array(e),a="";for(let e=0;e<t.byteLength;e++)a+=String.fromCharCode(t[e]);return btoa(a)}function o(){let e=new Date().toISOString().split("T")[0],t=Math.random().toString(36).substring(2,8).toUpperCase();return`PRIOR-KEY-${e}-${t}.key`}e.s(["calculateFileHash",()=>s,"decryptFile",()=>n,"encryptFile",()=>r,"generateEncryptionKey",()=>a,"generateKeyFilename",()=>o,"importKeyFromBase64",()=>i])},65447,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(475254);let n=(0,r.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),s=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=e.i(270756),l=e.i(167881),o=e.i(248425),c="Progress",[d,u]=function(e,r=[]){let n=[],s=()=>{let t=n.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return s.scopeName=e,[function(r,s){let i=a.createContext(s),l=n.length;n=[...n,s];let o=r=>{let{scope:n,children:s,...o}=r,c=n?.[e]?.[l]||i,d=a.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:s})};return o.displayName=r+"Provider",[o,function(t,n){let o=n?.[e]?.[l]||i,c=a.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:a,scopeName:r})=>{let n=a(e)[`__scope${r}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(s,...r)]}(c),[m,p]=d(c),h=a.forwardRef((e,a)=>{var r,n;let{__scopeProgress:s,value:i=null,max:l,getValueLabel:c=y,...d}=e;(l||0===l)&&!w(l)&&console.error((r=`${l}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=w(l)?l:100;null===i||v(i,u)||console.error((n=`${i}`,`Invalid prop \`value\` of value \`${n}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let p=v(i,u)?i:null,h=b(p)?c(p,u):void 0;return(0,t.jsx)(m,{scope:s,value:p,max:u,children:(0,t.jsx)(o.Primitive.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":b(p)?p:void 0,"aria-valuetext":h,role:"progressbar","data-state":g(p,u),"data-value":p??void 0,"data-max":u,...d,ref:a})})});h.displayName=c;var x="ProgressIndicator",f=a.forwardRef((e,a)=>{let{__scopeProgress:r,...n}=e,s=p(x,r);return(0,t.jsx)(o.Primitive.div,{"data-state":g(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:a})});function y(e,t){return`${Math.round(e/t*100)}%`}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function b(e){return"number"==typeof e}function w(e){return b(e)&&!isNaN(e)&&e>0}function v(e,t){return b(e)&&!isNaN(e)&&e<=t&&e>=0}f.displayName=x,e.s(["Indicator",()=>f,"Progress",()=>h,"ProgressIndicator",()=>f,"Root",()=>h,"createProgressScope",()=>u],676027);var j=e.i(676027),j=j,N=e.i(647163);function C({className:e,value:a,...r}){return(0,t.jsx)(j.Root,{"data-slot":"progress",className:(0,N.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,t.jsx)(j.Indicator,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}var S=e.i(781947);function k({onFileSelected:r}){let[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[h,x]=(0,a.useState)(0),[f,y]=(0,a.useState)(null),g=(0,a.useCallback)(e=>{e.preventDefault(),c(!0)},[]),b=(0,a.useCallback)(e=>{e.preventDefault(),c(!1)},[]),w=async t=>{y(null),p(!0),x(10);try{console.log("Starting encryption...");let{generateEncryptionKey:a,encryptFile:n}=await e.A(699289);console.log("Crypto module loaded"),x(30),console.log("Generating key...");let{key:s,exportedKey:i}=await a();console.log("Key generated successfully"),x(50),console.log("Encrypting file...",t.name,t.size);let{encryptedData:l,iv:o}=await n(t,s);console.log("File encrypted successfully",l.byteLength),x(80),await new Promise(e=>setTimeout(e,500)),x(100),u(t),r(t,l,o,i)}catch(t){let e=t instanceof Error?t.message:"Unknown error";y(`Encryption failed: ${e}`),console.error("Encryption error:",t)}finally{p(!1)}},v=(0,a.useCallback)(e=>{e.preventDefault(),c(!1);let t=e.dataTransfer.files;t.length>0&&w(t[0])},[r]),j=(0,a.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&w(t[0])},[r]);return(0,t.jsxs)("div",{className:"space-y-4",children:[f&&(0,t.jsx)(S.Alert,{variant:"destructive",children:(0,t.jsx)(S.AlertDescription,{children:f})}),d?(0,t.jsx)("div",{className:"p-6 rounded-xl bg-slate-100 border border-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center",children:(0,t.jsx)(i.Lock,{className:"w-6 h-6 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-slate-900",children:d.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[(d.size/1024).toFixed(1)," KB • Encrypted"]})]})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>{u(null),x(0),y(null)},children:(0,t.jsx)(s,{className:"w-4 h-4"})})]})}):(0,t.jsxs)("div",{onDragOver:g,onDragLeave:b,onDrop:v,className:`border-2 border-dashed rounded-xl p-12 text-center transition-colors ${o?"border-purple-600 bg-purple-600/10":"border-slate-600 bg-slate-100 hover:border-slate-500"}`,children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl bg-slate-200 flex items-center justify-center",children:(0,t.jsx)(n,{className:"w-8 h-8 text-slate-600"})}),(0,t.jsx)("p",{className:"text-slate-900 font-medium mb-2",children:o?"Drop your file here":"Drag & drop your file here"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mb-4",children:"or"}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"file",onChange:j,className:"hidden",disabled:m}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",disabled:m,onClick:()=>document.querySelector('input[type="file"]')?.click(),children:m?"Encrypting...":"Select File"})]}),(0,t.jsx)("p",{className:"text-slate-500 text-xs mt-4",children:"AES-256 encryption happens in your browser. We never see your data."})]}),m&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Encrypting..."}),(0,t.jsxs)("span",{className:"text-purple-600",children:[h,"%"]})]}),(0,t.jsx)(C,{value:h,className:"h-2"})]})]})}var I=e.i(970065);function T({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,N.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var M=a.forwardRef((e,a)=>(0,t.jsx)(o.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));M.displayName="Label",e.s(["Label",()=>M,"Root",()=>M],973741);var A=e.i(973741),A=A;function E({className:e,...a}){return(0,t.jsx)(A.Root,{"data-slot":"label",className:(0,N.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}var R=e.i(269035),B=e.i(972520),F=e.i(440160),D=e.i(269638),P=e.i(778917),W=e.i(252754),L=e.i(98919),Y=e.i(878894),U=e.i(645239);async function Z(e,t){let a=new FormData;a.append("file",e,t||"prior-upload");let r=JSON.stringify({name:t||"prior-claim",keyvalues:{source:"prior-app",timestamp:Date.now().toString()}});a.append("pinataMetadata",r);let n=JSON.stringify({cidVersion:1});a.append("pinataOptions",n);try{console.log("Uploading to Pinata...");let e=await fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiIxMWJjMTY2MS0xZmU4LTQ2YWQtYjYzNi0wYTUxYjYzZDYyNmIiLCJlbWFpbCI6InNhcmlrbmFuYWtpQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiIxMGM4ZmI2OTdlMDJjMmI5MGIyYiIsInNjb3BlZEtleVNlY3JldCI6ImNkMDZjNTYyZTMwOWM0NTBlNTk5ZmIwYWRhMzBjNzRiZDFhYjRjYTFjNzBjMjc2MGI3ZGVlYjZkNDFhYzgxOWQiLCJleHAiOjE4MDE5NDc5MTR9.kKJozumbF2q_saMRUz7nD9jh47K3NQZRUGEtofc2xe8"},body:a});if(!e.ok){let t=await e.text();throw console.error("Pinata error response:",t),Error(`Pinata upload failed: ${t}`)}let t=await e.json();return console.log("Pinata upload success:",t.IpfsHash),{cid:t.IpfsHash,ipfsUrl:`ipfs://${t.IpfsHash}`,gatewayUrl:`https://gateway.pinata.cloud/ipfs/${t.IpfsHash}`,size:t.PinSize}}catch(e){throw console.error("IPFS upload error:",e),e}}e.i(247167);var O=e.i(954616),z=e.i(189991),H=e.i(611573),q=e.i(656679),$=e.i(807749),J=e.i(467125),_=e.i(569934),G=e.i(290392),K=e.i(505880),V=e.i(147526),X=e.i(10725),Q=e.i(264404),ee=e.i(190521),et=e.i(976677),ea=e.i(353464),er=e.i(975948),en=e.i(368941),es=e.i(638291);let ei=new et.LruMap(128);async function el(e,t){let{account:a=e.account,assertChainId:r=!0,chain:n=e.chain,accessList:s,authorizationList:i,blobs:l,data:o,dataSuffix:c="string"==typeof e.dataSuffix?e.dataSuffix:e.dataSuffix?.value,gas:d,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:x,type:f,value:y,...g}=t;if(void 0===a)throw new H.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});let b=a?(0,z.parseAccount)(a):null;try{(0,ea.assertRequest)(t);let a=await (async()=>t.to?t.to:null!==t.to&&i&&i.length>0?await (0,G.recoverAuthorizationAddress)({authorization:i[0]}).catch(()=>{throw new _.BaseError("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(b?.type==="json-rpc"||null===b){let t;null!==n&&(t=await (0,J.getAction)(e,er.getChainId,"getChainId")({}),r&&function({chain:e,currentChainId:t}){if(!e)throw new K.ChainNotFoundError;if(t!==e.id)throw new K.ChainMismatchError({chain:e,currentChainId:t})}({currentChainId:t,chain:n}));let w=e.chain?.formatters?.transactionRequest?.format,v=(w||ee.formatTransactionRequest)({...(0,Q.extract)(g,{format:w}),accessList:s,account:b,authorizationList:i,blobs:l,chainId:t,data:o?(0,V.concat)([o,c??"0x"]):o,gas:d,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:x,to:a,type:f,value:y},"sendTransaction"),j=ei.get(e.uid);try{return await e.request({method:j?"wallet_sendTransaction":"eth_sendTransaction",params:[v]},{retryCount:0})}catch(t){if(!1===j)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[v]},{retryCount:0}).then(t=>(ei.set(e.uid,!0),t)).catch(a=>{if("MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name)throw ei.set(e.uid,!1),t;throw a});throw t}}if(b?.type==="local"){let t=await (0,J.getAction)(e,en.prepareTransactionRequest,"prepareTransactionRequest")({account:b,accessList:s,authorizationList:i,blobs:l,chain:n,data:o?(0,V.concat)([o,c??"0x"]):o,gas:d,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:p,maxPriorityFeePerGas:h,nonce:x,nonceManager:b.nonceManager,parameters:[...en.defaultParameters,"sidecars"],type:f,value:y,...g,to:a}),r=n?.serializers?.transaction,w=await b.signTransaction(t,{serializer:r});return await (0,J.getAction)(e,es.sendRawTransaction,"sendRawTransaction")({serializedTransaction:w})}if(b?.type==="smart")throw new H.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new H.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:b?.type})}catch(e){if(e instanceof H.AccountTypeNotSupportedError)throw e;throw(0,X.getTransactionError)(e,{...t,account:b,chain:t.chain||void 0})}}async function eo(e,t){return eo.internal(e,el,"sendTransaction",t)}(eo||(eo={})).internal=async function(e,t,a,r){let{abi:n,account:s=e.account,address:i,args:l,functionName:o,...c}=r;if(void 0===s)throw new H.AccountNotFoundError({docsPath:"/docs/contract/writeContract"});let d=s?(0,z.parseAccount)(s):null,u=(0,q.encodeFunctionData)({abi:n,args:l,functionName:o});try{return await (0,J.getAction)(e,t,a)({data:u,to:i,account:d,...c})}catch(e){throw(0,$.getContractError)(e,{abi:n,address:i,args:l,docsPath:"/docs/contract/writeContract",functionName:o,sender:d?.address})}};var ec=e.i(426254),ed=e.i(44563);async function eu(e,t){let a,{account:r,chainId:n,connector:s,...i}=t;a="object"==typeof r&&r?.type==="local"?e.getClient({chainId:n}):await (0,ed.getConnectorClient)(e,{account:r??void 0,assertChainId:!1,chainId:n,connector:s});let l=(0,ec.getAction)(a,eo,"writeContract");return await l({...i,...r?{account:r}:{},chain:n?{id:n}:null})}var em=e.i(210920),ep=e.i(789594),eh=e.i(789408),ex=e.i(348396),ef=e.i(170778);function ey(e={}){let{abi:t,address:a,functionName:r,query:n={}}=e,s=e.code,i=(0,em.useConfig)(e),l=(0,ef.useChainId)({config:i}),o=function(e,t={}){return{async queryFn({queryKey:a}){let r=t.abi;if(!r)throw Error("abi is required");let{functionName:n,scopeKey:s,...i}=a[1],l=(()=>{let e=a[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!n)throw Error("functionName is required");return(0,ep.readContract)(e,{abi:r,functionName:n,args:i.args,...l,...i})},queryKey:function(e={}){let{abi:t,...a}=e;return["readContract",(0,eh.filterQueryOptions)(a)]}(t)}}(i,{...e,chainId:e.chainId??l}),c=!!((a||s)&&t&&r&&(n.enabled??!0));return(0,ex.useQuery)({...n,...o,enabled:c,structuralSharing:n.structuralSharing??eh.structuralSharing})}var eg=e.i(982615),eb=e.i(604140);let ew=[{inputs:[{name:"_contentHash",type:"bytes32"},{name:"_ipfsCid",type:"string"},{name:"_assertion",type:"string"}],name:"fileClaim",outputs:[{name:"claimId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_claimId",type:"uint256"}],name:"getClaim",outputs:[{name:"",type:"tuple",components:[{name:"contentHash",type:"bytes32"},{name:"ipfsCid",type:"string"},{name:"assertion",type:"string"},{name:"claimant",type:"address"},{name:"timestamp",type:"uint256"},{name:"blockNumber",type:"uint256"},{name:"exists",type:"bool"}]}],stateMutability:"view",type:"function"},{inputs:[{name:"_claimant",type:"address"}],name:"getClaimsByClaimant",outputs:[{name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalClaims",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"_claimId",type:"uint256"}],name:"claimExists",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"_contentHash",type:"bytes32"}],name:"getClaimIdByHash",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ev="0x2405DBaDD194C132713e902d99C8482c771601A4";var ej=e.i(722652),eN=e.i(522016);function eC(){let{isConnected:r,address:n,chainId:s}=(0,eg.useAccount)(),{fileClaim:o,isWritePending:c}=function(){let{address:e,isConnected:t,chainId:a}=(0,eg.useAccount)(),{switchChain:r}=(0,eb.useSwitchChain)(),{writeContractAsync:n,isPending:s,error:i}=function(e={}){var t;let{mutation:a}=e,r=(t=(0,em.useConfig)(e),{mutationFn:e=>eu(t,e),mutationKey:["writeContract"]}),{mutate:n,mutateAsync:s,...i}=(0,O.useMutation)({...a,...r});return{...i,writeContract:n,writeContractAsync:s}}(),l=84532===a;return{fileClaim:async a=>{if(!t)throw Error("Wallet not connected");if(!l)throw Error("Please switch to Base Sepolia network (Chain ID: 84532)");try{let t=await n({address:ev,abi:ew,functionName:"fileClaim",args:[a.contentHash,a.ipfsCid,a.assertion]});return{claimId:0,contentHash:a.contentHash,ipfsCid:a.ipfsCid,assertion:a.assertion,claimant:e,timestamp:Math.floor(Date.now()/1e3),blockNumber:0,exists:!0,txHash:t}}catch(e){throw console.error("Failed to file claim:",e),e}},isWritePending:s,writeError:i,useGetClaim:e=>ey({address:ev,abi:ew,functionName:"getClaim",args:[BigInt(e)],query:{enabled:e>0}}),useGetClaimsByAddress:t=>ey({address:ev,abi:ew,functionName:"getClaimsByClaimant",args:[t||e],query:{enabled:!!(t||e)}}),useClaimExists:e=>ey({address:ev,abi:ew,functionName:"claimExists",args:[BigInt(e)],query:{enabled:e>0}}),useTotalClaims:()=>ey({address:ev,abi:ew,functionName:"totalClaims",query:{enabled:!0}}),isConnected:t,address:e,chainId:a,isCorrectChain:l,switchToBaseSepolia:()=>{r&&r({chainId:84532})},contractAddress:ev}}(),{switchChain:d}=(0,eb.useSwitchChain)(),u=8453===s,[m,p]=(0,a.useState)(1),[h,x]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[g,b]=(0,a.useState)(""),[w,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[C,M]=(0,a.useState)(!1),[A,z]=(0,a.useState)(!1),[H,q]=(0,a.useState)(""),[$,J]=(0,a.useState)(!1),[_,G]=(0,a.useState)(null),K=()=>{d&&d({chainId:8453})},V=async()=>{if(h&&f&&j){if(!r)return void G("Please connect your wallet first");if(!u)return void G("Please switch to Base Sepolia network");M(!0),G(null);try{let t=new Blob([f]),a=await Z(t,h.name);v(a.cid),p(3);let{calculateFileHash:r}=await e.A(699289),n="0x"+await r(f),s=await o({contentHash:n,ipfsCid:a.cid,assertion:j});s&&(q(s.txHash||""),z(!0),p(4))}catch(e){console.error("Claim failed:",e),G(e instanceof Error?e.message:"Failed to file claim")}finally{M(!1)}}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-white",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto py-12 px-4",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-100 border border-indigo-200 mb-6",children:[(0,t.jsx)(i.Lock,{className:"w-4 h-4 text-indigo-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-indigo-700",children:"Secure & Immutable"})]}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-4",children:"File Your Tesla Claim"}),(0,t.jsx)("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Timestamp your invention with cryptographic proof. Immutable, decentralized, undeniable."})]}),_&&(0,t.jsx)(S.Alert,{variant:"destructive",className:"mb-6",children:(0,t.jsx)(S.AlertDescription,{children:_})}),!r&&(0,t.jsx)(I.Card,{className:"mb-8 border-amber-200 bg-amber-50",children:(0,t.jsxs)(I.CardContent,{className:"flex items-center justify-between py-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(W.Wallet,{className:"w-6 h-6 text-amber-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-amber-900",children:"Wallet Required"}),(0,t.jsx)("p",{className:"text-sm text-amber-700",children:"Connect your wallet to file a Tesla Claim"})]})]}),(0,t.jsx)(ej.ConnectButton,{})]})}),r&&!u&&(0,t.jsx)(I.Card,{className:"mb-8 border-red-200 bg-red-50",children:(0,t.jsxs)(I.CardContent,{className:"flex items-center justify-between py-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(Y.AlertTriangle,{className:"w-6 h-6 text-red-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-red-900",children:"Wrong Network"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:"Please switch to Base Mainnet"})]})]}),(0,t.jsx)(l.Button,{onClick:K,className:"bg-red-600 hover:bg-red-700 text-white",children:"Switch to Base Mainnet"})]})}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-4 mb-8",children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${m>=e?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white":"bg-slate-200 text-slate-400"}`,children:m>e?(0,t.jsx)(D.CheckCircle,{className:"w-5 h-5"}):e}),e<4&&(0,t.jsx)("div",{className:`w-12 h-0.5 ${m>e?"bg-gradient-to-r from-indigo-500 to-purple-500":"bg-slate-200"}`})]},e))}),1===m&&(0,t.jsxs)(I.Card,{children:[(0,t.jsx)(I.CardHeader,{children:(0,t.jsxs)(I.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold",children:"1"}),"Upload Your File"]})}),(0,t.jsxs)(I.CardContent,{children:[(0,t.jsx)(k,{onFileSelected:(e,t,a,r)=>{x(e),y(t),b(r),p(2),G(null)}}),(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-4",children:"Your file is encrypted in the browser using AES-256-GCM. We never see your unencrypted data."})]})]}),2===m&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(I.Card,{children:[(0,t.jsx)(I.CardHeader,{children:(0,t.jsxs)(I.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold",children:"2"}),"Download Your Key Bundle"]})}),(0,t.jsx)(I.CardContent,{children:(0,t.jsx)("div",{className:"p-6 bg-amber-50 rounded-xl border-2 border-amber-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(L.Shield,{className:"w-6 h-6 text-amber-600 mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-amber-900 mb-2",children:"⚠️ Critical: Save Both Files"}),(0,t.jsx)("p",{className:"text-sm text-amber-800 mb-4",children:"You must download BOTH the key file AND the encrypted binary. Without both, you can never decrypt your file. We cannot recover them."}),(0,t.jsxs)(l.Button,{onClick:()=>{let e=new Blob([JSON.stringify({key:g,filename:h?.name,timestamp:Date.now(),id:Math.random().toString(36).substring(2,11)},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");if(a.href=t,a.download=(0,U.generateKeyFilename)(),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),f){let e=new Blob([f]),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`${h?.name||"file"}.prior-encrypted`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}J(!0)},className:"bg-amber-600 hover:bg-amber-700 text-white",children:[(0,t.jsx)(F.Download,{className:"w-4 h-4 mr-2"}),"Download Bundle (Key + Encrypted File)"]})]})]})})})]}),(0,t.jsxs)(I.Card,{children:[(0,t.jsx)(I.CardHeader,{children:(0,t.jsx)(I.CardTitle,{children:"What Are You Claiming?"})}),(0,t.jsx)(I.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E,{htmlFor:"assertion",children:"Your Assertion *"}),(0,t.jsx)(T,{id:"assertion",placeholder:"e.g., 'I invented this widget on January 15, 2026'",value:j,onChange:e=>N(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This is your claim. The network remembers; courts decide (if needed)."})]}),(0,t.jsx)(R.Separator,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center",children:(0,t.jsx)(W.Wallet,{className:"w-5 h-5 text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:"Network Fee (Gas)"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Small fee paid to Base validators"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:"~$0.001"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Typically <0.0001 ETH"})]})]}),(0,t.jsx)(l.Button,{onClick:V,disabled:!j||!$||C||c||!r||!u,className:"w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 hover:opacity-90 text-white",children:C||c?"Processing...":(0,t.jsxs)(t.Fragment,{children:["File Tesla Claim",(0,t.jsx)(B.ArrowRight,{className:"w-4 h-4 ml-2"})]})}),r&&!u&&(0,t.jsx)(l.Button,{onClick:K,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Switch to Base Mainnet to Submit"}),!r&&(0,t.jsx)("div",{className:"flex justify-center mt-4",children:(0,t.jsx)(ej.ConnectButton,{})}),!$&&(0,t.jsx)("p",{className:"text-sm text-amber-600 text-center",children:"Download the key bundle above before filing"})]})})]})]}),3===m&&(0,t.jsxs)(I.Card,{children:[(0,t.jsx)(I.CardHeader,{children:(0,t.jsx)(I.CardTitle,{children:"Anchoring to Blockchain..."})}),(0,t.jsxs)(I.CardContent,{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-500 rounded-full animate-spin mx-auto mb-6"}),(0,t.jsx)("p",{className:"text-lg text-slate-700",children:"Writing claim to Base Sepolia..."}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:["IPFS CID: ",w]})]})]}),4===m&&A&&(0,t.jsxs)(I.Card,{className:"border-green-200",children:[(0,t.jsx)(I.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)(D.CheckCircle,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(I.CardTitle,{children:"Tesla Claim Filed!"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Your invention is now timestamped on-chain"})]})]})}),(0,t.jsx)(I.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"IPFS Content ID"}),(0,t.jsx)("p",{className:"font-mono text-slate-700 break-all",children:w})]}),H&&(0,t.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-slate-500 mb-1",children:"Transaction Hash"}),(0,t.jsx)("p",{className:"font-mono text-slate-700 truncate",children:H}),(0,t.jsxs)("a",{href:`https://sepolia.basescan.org/tx/${H}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-indigo-600 hover:text-indigo-500 mt-2",children:["View on BaseScan",(0,t.jsx)(P.ExternalLink,{className:"w-3 h-3"})]})]}),(0,t.jsx)("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:(0,t.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,t.jsx)("strong",{children:"Reminder:"})," Keep your key file safe! Without it, you cannot decrypt your file—even though the claim is on-chain."]})}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(eN.default,{href:"/claims",className:"flex-1",children:(0,t.jsx)(l.Button,{variant:"outline",className:"w-full",children:"View My Claims"})}),(0,t.jsx)(eN.default,{href:"/claim",className:"flex-1",children:(0,t.jsx)(l.Button,{className:"w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500",children:"File Another"})})]})]})})]})]})})}e.s(["default",()=>eC],65447)},699289,e=>{e.v(e=>Promise.resolve().then(()=>e(645239)))}]);